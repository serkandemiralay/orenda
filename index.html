<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Arkeoloji Kelime AvÄ±</title>
  <style>
    :root{
      --bg: #f7f1e3;
      --card: #fff8e8;
      --ink: #2b2b2b;
      --muted:#6b6b6b;
      --brand:#2d6a4f;
      --accent:#ffb703;
      --bad:#d00000;
      --good:#1b9aaa;
      --grid:#d8c9a6;
      --shadow: 0 10px 25px rgba(0,0,0,.08);
      --radius: 18px;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      color:var(--ink);
      background: radial-gradient(1200px 700px at 20% 0%, #fff 0%, var(--bg) 55%, #efe3c5 100%);
      min-height:100vh;
      display:flex;
      justify-content:center;
      padding: 18px;
    }
    .wrap{
      width:min(1080px, 100%);
      display:grid;
      grid-template-columns: 1.35fr .65fr;
      gap: 16px;
      align-items:start;
    }
    @media (max-width: 900px){
      .wrap{ grid-template-columns: 1fr; }
    }

    .panel{
      background: var(--card);
      border: 2px solid rgba(0,0,0,.06);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    header{
      padding: 16px 16px 10px;
      border-bottom: 2px dashed rgba(0,0,0,.08);
      display:flex;
      gap:12px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    h1{
      margin:0;
      font-size: clamp(18px, 2.2vw, 26px);
      letter-spacing:.3px;
    }
    .sub{
      margin:4px 0 0;
      color:var(--muted);
      font-size: 14px;
      line-height: 1.35;
      max-width: 58ch;
    }
    .chips{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    .chip{
      font-size: 13px;
      padding: 8px 10px;
      border-radius: 999px;
      background:#fff;
      border:1px solid rgba(0,0,0,.08);
      color:#333;
      user-select:none;
      display:flex;
      gap:8px;
      align-items:center;
    }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background: var(--accent);
      box-shadow: 0 0 0 3px rgba(255,183,3,.25);
    }

    .content{
      padding: 14px 14px 16px;
    }

    /* GRID */
    .grid{
      display:grid;
      grid-template-columns: repeat(19, 1fr);
      gap: 6px;
      background: linear-gradient(180deg, rgba(0,0,0,.03), rgba(0,0,0,.01));
      border: 2px solid rgba(0,0,0,.06);
      border-radius: 14px;
      padding: 10px;
      touch-action: none; /* drag for touch */
      user-select:none;
    }
    .cell{
      aspect-ratio: 1/1;
      border-radius: 10px;
      border: 2px solid rgba(0,0,0,.08);
      background:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 800;
      letter-spacing:.5px;
      font-size: clamp(14px, 1.6vw, 18px);
      cursor: pointer;
      transition: transform .05s ease, background .15s ease, border-color .15s ease;
    }
    .cell:active{ transform: scale(.98); }
    .cell.sel{
      background: rgba(255,183,3,.35);
      border-color: rgba(255,183,3,.9);
    }
    .cell.found{
      background: rgba(27,154,170,.25);
      border-color: rgba(27,154,170,.85);
    }

    /* SIDE */
    .side{
      padding: 14px;
      display:flex;
      flex-direction:column;
      gap: 12px;
    }
    .box{
      background:#fff;
      border:1px solid rgba(0,0,0,.08);
      border-radius: 14px;
      padding: 12px;
    }
    .box h2{
      margin:0 0 8px;
      font-size: 16px;
    }
    .hint{
      margin:0;
      color:var(--muted);
      font-size: 14px;
      line-height: 1.45;
    }
    .words{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      margin-top:10px;
    }
    .word{
      padding: 8px 10px;
      border-radius: 12px;
      border:1px solid rgba(0,0,0,.08);
      background: #fff;
      font-weight:700;
      letter-spacing:.3px;
      font-size: 14px;
    }
    .word.done{
      background: rgba(45,106,79,.12);
      border-color: rgba(45,106,79,.55);
      text-decoration: line-through;
      color:#1f513d;
    }

    .controls{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 10px;
    }
    button{
      border:0;
      border-radius: 12px;
      padding: 10px 12px;
      font-weight: 800;
      cursor:pointer;
      background: var(--brand);
      color:#fff;
      box-shadow: 0 8px 18px rgba(45,106,79,.22);
    }
    button.secondary{
      background:#fff;
      color:#222;
      border:1px solid rgba(0,0,0,.12);
      box-shadow:none;
    }

    .status{
      margin-top: 10px;
      font-size: 14px;
      color: var(--muted);
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }
    .status strong{ color:#111; }
    .toast{
      padding: 8px 10px;
      border-radius: 12px;
      background:#fff;
      border:1px solid rgba(0,0,0,.08);
    }
    .toast.good{
      border-color: rgba(27,154,170,.6);
      background: rgba(27,154,170,.08);
      color:#0e5e66;
    }
    .toast.bad{
      border-color: rgba(208,0,0,.35);
      background: rgba(208,0,0,.06);
      color:#8b0000;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <section class="panel">
      <header>
        <div>
          <h1>ğŸ§­ Arkeoloji Kelime AvÄ±</h1>
          <p class="sub">
            <b>NasÄ±l oynanÄ±r?</b> Bir kelimenin harflerini <b>baÅŸÄ±ndan sonuna</b> doÄŸru
            <b>tÄ±klayÄ±p sÃ¼rÃ¼kleyerek</b> seÃ§. DÃ¼z bir Ã§izgi olmalÄ± (yatay / dikey / Ã§apraz).
          </p>
        </div>
        <div class="chips">
          <div class="chip"><span class="dot"></span> Bulunanlar mavi olur</div>
          <div class="chip"><span class="dot" style="background:rgba(255,183,3,.95)"></span> SeÃ§im sarÄ± olur</div>
        </div>
      </header>

      <div class="content">
        <div id="grid" class="grid" aria-label="Harf tablosu"></div>

        <div class="status" aria-live="polite">
          <div class="toast" id="currentPick">SeÃ§im: <strong>-</strong></div>
          <div class="toast" id="progress">Ä°lerleme: <strong>0 / 12</strong></div>
          <div class="toast good" id="msg" style="display:none"></div>
          <div class="toast bad" id="err" style="display:none"></div>
        </div>
      </div>
    </section>

    <aside class="panel side">
      <div class="box">
        <h2>ğŸ” Bulunacak Kelimeler</h2>
        <p class="hint">Hepsini bulunca tebrikler mesajÄ± Ã§Ä±kacak. ğŸ‰</p>
        <div id="wordList" class="words"></div>

        <div class="controls">
          <button id="resetBtn" class="secondary" type="button">SÄ±fÄ±rla</button>
          <button id="revealBtn" type="button">Ä°pucu (1 harf)</button>
        </div>

        <p class="hint" style="margin-top:10px">
          <b>Ä°pucu</b>: â€œÄ°pucuâ€ butonu bir kelimenin <b>ilk harfini</b> kÄ±sa sÃ¼reliÄŸine parlatÄ±r.
        </p>
      </div>

      <div class="box">
        <h2>ğŸ‘©â€ğŸ« Ã–ÄŸretmen Modu (Ä°steÄŸe baÄŸlÄ±)</h2>
        <p class="hint">
          Bu sayfa tek dosyadÄ±r. Ä°stersen kelime listesini veya harf tablosunu aÅŸaÄŸÄ±daki JavaScript kÄ±smÄ±ndan
          kolayca deÄŸiÅŸtirebilirsin.
        </p>
      </div>
    </aside>
  </div>

  <script>
    // ====== 19x19 TABLO (gÃ¶nderdiÄŸin gÃ¶rselden birebir) ======
    const GRID_ROWS = [
      "ALXWHWTFQTERXXPSVRE",
      "OTVNWQTOHCAZDJFPSMI",
      "NXVOQNEGRRSXPRSFANK",
      "LRPVANTFKBHSRVAUOBG",
      "XPNGKGWEDJQBZMZASUU",
      "AGRABVOTPHLQIVMSGVQ",
      "BLNEMLTLATFKLYNGLVP",
      "EDDDOTNDYOYMUEBOQJR",
      "TRRJXIAVNDLTOJUUTTN",
      "JPIWJTCKÃœRCEVBZOTPK",
      "VVHRMNABDLLVSASEOHB",
      "VRZJÃœHSYKYRPNORISQJ",
      "JNCFZXLZMDIRTNRRDOU",
      "UTRTEYCPPDVWYXLALYK",
      "WZIADHFHDIKQENMOREE",
      "XZLOJEDQUERIKDNILVG",
      "NVSWWOHPIGQBPKGHCFF",
      "TLFHSCOQLFMYEJDKWHQ",
      "EPOEQEKÃœYÃ–HUSMZWZGI",
    ];

    const WORDS_DISPLAY = [
      "ALET",
      "ANTÄ°K",
      "ARKEOLOJÄ°",
      "DÃœNYA",
      "ENVANTER",
      "FOSÄ°L",
      "HÃ–YÃœK",
      "KATMAN",
      "KAZI",
      "MÃœZE",
      "OBSÄ°DYEN",
      "SERAMÄ°K",
      "TEKNOLOJÄ°",
    ];

    // TÃ¼rkÃ§e karakterleri karÅŸÄ±laÅŸtÄ±rmayÄ± kolaylaÅŸtÄ±rmak iÃ§in sadeleÅŸtirme:
    // (Ã–rn. ANTÄ°K -> ANTIK, ARKEOLOJÄ° -> ARKEOLOJI)
    const normalizeTR = (s) => s
      .toUpperCase("tr-TR")
      .replaceAll("Ä°","I")
      .replaceAll("I","I")   // sabit kalsÄ±n
      .replaceAll("Å","S")
      .replaceAll("Ä","G")
      .replaceAll("Ãœ","U")
      .replaceAll("Ã–","O")
      .replaceAll("Ã‡","C");

    const WORDS = WORDS_DISPLAY.map(w => ({
      display: w,
      key: normalizeTR(w),
      found: false
    }));

    // ====== DOM ======
    const gridEl = document.getElementById("grid");
    const wordListEl = document.getElementById("wordList");
    const currentPickEl = document.getElementById("currentPick").querySelector("strong");
    const progressEl = document.getElementById("progress").querySelector("strong");
    const msgEl = document.getElementById("msg");
    const errEl = document.getElementById("err");
    const resetBtn = document.getElementById("resetBtn");
    const revealBtn = document.getElementById("revealBtn");

    // ====== STATE ======
    const size = 19;
    const cells = []; // {el, r, c, ch}
    let selecting = false;
    let selection = []; // indices into cells
    let direction = null; // {dr, dc} once locked

    // Found cells map: "r,c" => true
    const foundMap = new Set();

    // ====== BUILD UI ======
    function buildGrid(){
      gridEl.innerHTML = "";
      cells.length = 0;

      for(let r=0; r<size; r++){
        for(let c=0; c<size; c++){
          const ch = GRID_ROWS[r][c];
          const btn = document.createElement("div");
          btn.className = "cell";
          btn.textContent = ch;
          btn.dataset.r = r;
          btn.dataset.c = c;
          btn.setAttribute("role","button");
          btn.setAttribute("aria-label", `SatÄ±r ${r+1} sÃ¼tun ${c+1} harfi ${ch}`);
          gridEl.appendChild(btn);
          cells.push({el: btn, r, c, ch});
        }
      }
    }

    function buildWordList(){
      wordListEl.innerHTML = "";
      for(const w of WORDS){
        const div = document.createElement("div");
        div.className = "word";
        div.textContent = w.display;
        div.dataset.key = w.key;
        wordListEl.appendChild(div);
      }
      updateProgress();
    }

    function updateProgress(){
      const done = WORDS.filter(w=>w.found).length;
      progressEl.textContent = `${done} / ${WORDS.length}`;
      if(done === WORDS.length){
        showMsg("ğŸ‰ Harika! TÃ¼m kelimeleri buldun!", "good");
      }
    }

    // ====== SELECTION LOGIC ======
    function cellIndex(r,c){ return r*size + c; }
    function getCellFromEventTarget(t){
      if(!t) return null;
      const el = t.closest?.(".cell");
      if(!el) return null;
      const r = Number(el.dataset.r);
      const c = Number(el.dataset.c);
      return cells[cellIndex(r,c)];
    }

    function clearTempSelection(){
      for(const idx of selection){
        const key = `${cells[idx].r},${cells[idx].c}`;
        if(!foundMap.has(key)){
          cells[idx].el.classList.remove("sel");
        }
      }
      selection = [];
      direction = null;
      currentPickEl.textContent = "-";
    }

    function addToSelection(cell){
      const idx = cellIndex(cell.r, cell.c);
      if(selection.includes(idx)) return;

      // If first cell
      if(selection.length === 0){
        selection.push(idx);
        cell.el.classList.add("sel");
        currentPickEl.textContent = cell.ch;
        return;
      }

      const last = cells[selection[selection.length - 1]];

      // Must be adjacent step (dr,dc in [-1,0,1], not both 0)
      const dr = cell.r - last.r;
      const dc = cell.c - last.c;
      if(Math.abs(dr) > 1 || Math.abs(dc) > 1 || (dr === 0 && dc === 0)){
        return;
      }

      // Lock direction on second cell
      if(!direction){
        direction = {dr, dc};
      } else {
        // Must keep same direction
        if(dr !== direction.dr || dc !== direction.dc) return;
      }

      selection.push(idx);
      cell.el.classList.add("sel");

      const pick = selection.map(i=>cells[i].ch).join("");
      currentPickEl.textContent = pick;
    }

    function finalizeSelection(){
      if(selection.length < 2){
        clearTempSelection();
        return;
      }
      const picked = selection.map(i=>cells[i].ch).join("");
      const pickedNorm = normalizeTR(picked);
      const reversedNorm = normalizeTR(picked.split("").reverse().join(""));

      const match = WORDS.find(w => !w.found && (w.key === pickedNorm || w.key === reversedNorm));
      if(match){
        match.found = true;

        // mark word
        const wordEl = wordListEl.querySelector(`.word[data-key="${match.key}"]`);
        if(wordEl) wordEl.classList.add("done");

        // lock cells as found
        for(const idx of selection){
          const c = cells[idx];
          foundMap.add(`${c.r},${c.c}`);
          c.el.classList.remove("sel");
          c.el.classList.add("found");
        }
        showMsg(`âœ… Bulundu: ${match.display}`, "good");
        updateProgress();
      } else {
        showMsg("âŒ Bu seÃ§im listede yok. Tekrar dene!", "bad");
        // clear just temporary highlight
        for(const idx of selection){
          const key = `${cells[idx].r},${cells[idx].c}`;
          if(!foundMap.has(key)){
            cells[idx].el.classList.remove("sel");
          }
        }
      }

      selection = [];
      direction = null;
      currentPickEl.textContent = "-";
    }

    // ====== TOAST ======
    let toastTimer = null;
    function showMsg(text, type){
      clearTimeout(toastTimer);
      if(type === "good"){
        msgEl.style.display = "inline-flex";
        errEl.style.display = "none";
        msgEl.textContent = text;
      } else {
        errEl.style.display = "inline-flex";
        msgEl.style.display = "none";
        errEl.textContent = text;
      }
      toastTimer = setTimeout(()=>{
        msgEl.style.display = "none";
        errEl.style.display = "none";
      }, 2200);
    }

    // ====== POINTER EVENTS (mouse + touch) ======
    gridEl.addEventListener("pointerdown", (e)=>{
      const cell = getCellFromEventTarget(e.target);
      if(!cell) return;
      selecting = true;
      clearTempSelection();
      addToSelection(cell);
      gridEl.setPointerCapture(e.pointerId);
    });

    gridEl.addEventListener("pointermove", (e)=>{
      if(!selecting) return;
      const cell = getCellFromEventTarget(e.target);
      if(!cell) return;
      addToSelection(cell);
    });

    gridEl.addEventListener("pointerup", (e)=>{
      if(!selecting) return;
      selecting = false;
      finalizeSelection();
      try{ gridEl.releasePointerCapture(e.pointerId); }catch(_){}
    });

    gridEl.addEventListener("pointercancel", ()=>{
      selecting = false;
      clearTempSelection();
    });

    // ====== BUTTONS ======
    resetBtn.addEventListener("click", ()=>{
      // reset words
      for(const w of WORDS) w.found = false;
      foundMap.clear();

      // reset UI
      buildGrid();
      buildWordList();
      clearTempSelection();
      showMsg("â†©ï¸ SÄ±fÄ±rlandÄ±. BaÅŸtan baÅŸlayabilirsin!", "good");
    });

    // Basit ipucu: bulunmamÄ±ÅŸ bir kelimenin ilk harfini 1.2sn parlat
    revealBtn.addEventListener("click", ()=>{
      const remaining = WORDS.filter(w=>!w.found);
      if(remaining.length === 0){
        showMsg("ğŸ‰ Zaten hepsi bulundu!", "good");
        return;
      }
      const w = remaining[Math.floor(Math.random()*remaining.length)];
      const first = w.key[0];

      // gridde o harften rastgele bir hÃ¼cre bul
      const candidates = cells.filter(c => normalizeTR(c.ch) === first);
      if(candidates.length === 0){
        showMsg("Ä°pucu veremedim (harf bulunamadÄ±).", "bad");
        return;
      }
      const c = candidates[Math.floor(Math.random()*candidates.length)];
      c.el.classList.add("sel");
      showMsg(`ğŸ’¡ Ä°pucu: Bir kelime ${w.display[0]} ile baÅŸlÄ±yor!`, "good");
      setTimeout(()=>{
        const key = `${c.r},${c.c}`;
        if(!foundMap.has(key)) c.el.classList.remove("sel");
      }, 1200);
    });

    // ====== INIT ======
    buildGrid();
    buildWordList();
  </script>
</body>
</html>
